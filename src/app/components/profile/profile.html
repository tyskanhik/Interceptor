<div class="profile-container">
  @if (authService.state().isLoading) {
    <div class="loading slide-up">
      <div class="loading-spinner">
        <i class="spinner">‚è≥</i>
      </div>
      <p>–ó–∞–≥—Ä—É–∑–∫–∞ –ø—Ä–æ—Ñ–∏–ª—è...</p>
    </div>
  }
  
  @if (authService.state().error; as error) {
    <div class="error-message slide-up">
      <i class="icon-error">‚ö†Ô∏è</i>
      <h3>–û—à–∏–±–∫–∞!</h3>
      <p>{{ error }}</p>
      <button (click)="loadProfile()" class="retry-btn">
        <i class="icon-retry">üîÑ</i>
        –ü–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å —Å–Ω–æ–≤–∞
      </button>
    </div>
  }

  @if (authService.state().user; as user) {
    <div class="profile-card slide-up">
      <div class="user-header">
        <img 
          [src]="user.image" 
          [alt]="user.firstName + ' ' + user.lastName" 
          class="user-image"
          (error)="user.image = 'https://via.placeholder.com/120?text=–ù–µ—Ç+—Ñ–æ—Ç–æ'"
        >
        <h2>{{ user.firstName }} {{ user.lastName }}</h2>
        <p class="user-title">@{{ user.username }}</p>
      </div>

      <div class="user-details">
        <div class="detail-item">
          <i class="icon">üìß</i>
          <div class="detail-content">
            <label>Email</label>
            <span>{{ user.email }}</span>
          </div>
        </div>

        <div class="detail-item">
          <i class="icon">üë§</i>
          <div class="detail-content">
            <label>ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è</label>
            <span>#{{ user.id }}</span>
          </div>
        </div>

        <div class="detail-item">
          <i class="icon">üöª</i>
          <div class="detail-content">
            <label>–ü–æ–ª</label>
            <span>{{ user.gender === 'female' ? '–ñ–µ–Ω—Å–∫–∏–π' : '–ú—É–∂—Å–∫–æ–π' }}</span>
          </div>
        </div>
      </div>

      <div class="profile-actions">
        <button (click)="refreshToken()" class="refresh-btn">
          <i class="icon-refresh">üîÑ</i>
          –û–±–Ω–æ–≤–∏—Ç—å —Ç–æ–∫–µ–Ω
        </button>
        <button (click)="logout()" class="logout-btn">
          <i class="icon-logout">üö™</i>
          –í—ã–π—Ç–∏
        </button>
      </div>
    </div>
  }

  @if (authService.state().isAuthenticated && !authService.state().user && !authService.state().isLoading) {
    <div class="profile-card slide-up">
      <div class="loading-state">
        <i class="icon-loading">üìã</i>
        <h3>–ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö –ø—Ä–æ—Ñ–∏–ª—è...</h3>
        <button (click)="loadProfile()" class="retry-btn">
          –ó–∞–≥—Ä—É–∑–∏—Ç—å –ø—Ä–æ—Ñ–∏–ª—å
        </button>
      </div>
    </div>
  }
</div>